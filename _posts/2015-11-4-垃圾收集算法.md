---
layout: post
title: "JVM垃圾收集算法"
date: 2015-11-04
categories: java
---

#垃圾收集算法

###标记-清除 算法

算法分为“标记”和“清除”两个阶段：首先标记出所有需要回收的对象，在标记完成后统一回收被标记的对象，它有两个不足的的地方：一个是效率问题，标记和清楚两个过程的效率都不高；另一个是空间问题，标记清除之后会产生大量不连续的内存碎片，空间碎片太多可能导致以后程序在运行过程中需要分配较大对象时，无法找到足够的连续内存而不提前触发另一次垃圾收集动作。

###复制 算法

复制算法将内存按容量分为大小相等的两个小块，每次只使用其中的一个块。当这块内存用完后，就将还存活的对象复制到另外一块上，然后把当前这块内存一次全部清除。这样使得每次都是对整个半区进行内存回收，内存分配时也不需要考虑内存碎片等复杂情况。复制算法实现简单，运行效率高。

###标记-整理 算法

标记-整理算法的标记过程与标记-清除算法的标记过程一样，直接在内存中标记处需要回收的对象，但是后续不是直接对可回收内存直接进行回收，而是让所有存活的对象都像一端移动，然后直接清除掉端边界意外的内存。

###分代收集 算法

**分代收集算法**根据对象存活周期的不同将内存划分为几块，JAVA堆分为**新生代**和**老年代**，根据各个年代的特点进行垃圾回收。在**新生代**中，每次垃圾收集时都发现有大批对象死去，只有少量存活，那就选用**复制算法**，只需要付出少量存活对象的复制成本就可以完成收集。而**老年代**中因为对象存活率高、没有额外空间对它进行分配担保，就必须使用**标记-清理**或者**标记-整理**算法来进行回收。
